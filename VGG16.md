### 下面是VGG16网络的结构图

![image](https://img-blog.csdnimg.cn/46be649cabf440c3918f7c48170a7b76.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5qmZ5a2Q5ZCWMjE=,size_20,color_FFFFFF,t_70,g_se,x_16)

### 介绍结构图：

conv3-64 ：是指第三层卷积后维度变成64，同样地，conv3-128指的是第三层卷积后维度变成128；  
input（224x224 RGB image） ：指的是输入图片大小为224244的彩色图像，通道为3，即224224*3；  
maxpool ：是指最大池化，在vgg16中，pooling采用的是2*2的最大池化方法（如果不懂最大池化，下面有解释）；  
FC-4096 :指的是全连接层中有4096个节点，同样地，FC-1000为该层全连接层有1000个节点；  
padding：指的是对矩阵在外边填充n圈，padding=1即填充1圈，5X5大小的矩阵，填充一圈后变成7X7大小；  
最后补充，vgg16每层卷积的滑动步长stride=1，padding=1，卷积核大小为333；  

### 1.VGG16的卷积核
* VGG使用多个较小卷积核（3x3）的卷积层代替一个卷积核较大的卷积层，一方面可以减少参数，另一方面相当于进行了更多的非线性映射，可以增加网络的拟合/表达能力。  
* 卷积层全部都是3*3的卷积核，用上图中conv3-xxx表示，xxx表示通道数。其步长为1，用padding=same填充。  
* 池化层的池化核为2*2  

### VGG16的具体过程

具体的过程：

* 输入图像尺寸为224x224x3，经64个通道为3的3x3的卷积核，步长为1，padding=same填充，卷积两次，再经ReLU激活，输出的尺寸大小为224x224x64  
* 经max pooling（最大化池化），滤波器为2x2，步长为2，图像尺寸减半，池化后的尺寸变为112x112x64  
* 经128个3x3的卷积核，两次卷积，ReLU激活，尺寸变为112x112x128  
* max pooling池化，尺寸变为56x56x128  
* 经256个3x3的卷积核，三次卷积，ReLU激活，尺寸变为56x56x256  
* max pooling池化，尺寸变为28x28x256  
* 经512个3x3的卷积核，三次卷积，ReLU激活，尺寸变为28x28x512  
* max pooling池化，尺寸变为14x14x512  
* 经512个3x3的卷积核，三次卷积，ReLU，尺寸变为14x14x512  
* max pooling池化，尺寸变为7x7x512  
* 然后Flatten()，将数据拉平成向量，变成一维51277=25088。  
* 再经过两层1x1x4096，一层1x1x1000的全连接层（共三层），经ReLU激活  
* 最后通过softmax输出1000个预测结果  

### 卷积曾前后，输入图像和输出图像大小关系

* 经过一个卷积层前后，输入和输出的图像的大小之间的关系取决于卷积层的超参数，包括卷积核大小、步长(stride)和填充(padding)等。  
* 假设输入特征图的大小为H×W×C，其中H、W和C分别表示高度、宽度和通道数，卷积核的大小为KH×KW，步长为S，填充为P，则经过卷积层后，输出特征图的大小为：  
* H' = (H + 2P - KH) / S + 1  
* W' = (W + 2P - KW) / S + 1  
* C' = K  
* 其中，H'、W'和C'分别表示输出特征图的高度、宽度和通道数。需要注意的是，如果有多个卷积核，那么输出特征图的通道数将等于卷积核的数量，即C'等于K。  
* 当填充为0时，即padding=0，上式简化为： 
* H' = (H - KH) / S + 1  
* W' = (W - KW) / S + 1  
* C' = K  
* 此时，输出特征图的大小取决于卷积核大小和步长大小。通常情况下，步长越大，输出特征图的尺寸越小；卷积核大小越大，输出特征图的尺寸也越大。如果要保持输出特征图的大小不变，可以使用填充(padding)操作。  

### Padding=same  （通过在输入特征图的边缘处添加恰当数量的0值像素，使得卷积后输出的特征图的大小与输入特征图的大小相同）

* 具体来说，在使用padding=same时，卷积核会从输入特征图的左上角开始进行卷积操作，此时卷积核的中心与输入特征图的左上角对齐。为了保证输出特征图的大小与输入特征图相同，需要在输入特征图的四个边缘分别添加padding个0值像素，其中padding的数量由以下公式计算得出：  
* padding = ((kernel_size - 1) / 2)  
* 其中，kernel_size是卷积核的大小。由于卷积核通常是正方形，因此kernel_size可以写成单个值，例如3或5等。在计算padding时，我们通常使用整数除法，以确保padding是整数。  
